<html>

<head>
  <style>
    body {
      color: white;
      background-color: black;
      align-items: center;
      text-align: center;
      padding-top: 20px;
      font-family: Calibri;
    }
  </style>
  <title>Calculadora de Impuestos - Jalisco</title>
</head>

<body>
  <input style="height: 30px; width: 300px;" id="input" type="text" onkeyup="activadoraTecla(event)"></input>
  <button style="height: 30px; width: 150px;" id="boton">Obtener resultado</button>

  <div id="output"></div>

  <script>


    function calculadoraDeImpuestos(a) {

      let resultado;
      // p

      if(a >= 0.1 && a <= 61500) {
        resultado = (a*0.02)
      }

      if(a >= 61500.01 && a <= 127500) {
        resultado = (a*0.045) + 1230
      }

      if(a >= 127500.01 && a <= 174800) {
        resultado = (a*0.069) + 4200
      }

      if(a >= 174800.01 && a <= 222200) {
        resultado = (a*0.07) + 7463.7
      }

      if(a >= 222200.01) {
        resultado = (a*0.071) + 10781.7
      }

      // p

      return resultado;
    }


    function activadora() {
      let input = parseFloat(document.getElementById("input").value)

      let resultado = (calculadoraDeImpuestos(input)).toFixed(2)

      console.log(resultado)
      output.innerHTML = `<br><br /><button href="#" style="font-size: 30px;" title="Click para copiar la cantidad al portapapeles." onclick="copiarAlPortapapeles()">Impuestos a pagar: <p onclick="copiarAlPortapapeles()" id="resultado">${resultado}</p></button>`

    }

    function activadoraTecla(event) {

      var keycode = event.keyCode
      if (keycode == '13') {
        activadora()
      }
    }

    function copiarAlPortapapeles() {
      let aux = document.createElement("input");
      aux.setAttribute("value", document.getElementById("resultado").innerHTML);
      document.body.appendChild(aux);
      aux.select();
      document.execCommand("copy");
      document.body.removeChild(aux);
    }

    //Codigo normal

    var boton = document.getElementById("boton")
    var output = document.getElementById("output")
    var resultado = document.getElementById("resultado")

    boton.addEventListener("click", activadora)
    resultado.addEventListener("click", copiarAlPortapapeles)

  </script>
</body>

</html>